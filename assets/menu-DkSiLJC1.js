const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DuMVb8EJ.js","assets/phaser-BOgQtUoh.js","assets/index-DumQ7QOU.css"])))=>i.map(i=>d[i]);
var P=Object.defineProperty;var D=(a,t,e)=>t in a?P(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var i=(a,t,e)=>D(a,typeof t!="symbol"?t+"":t,e);import{_ as M}from"./index-DuMVb8EJ.js";import"./phaser-BOgQtUoh.js";class m{constructor(t,e,s=1e3,n=.25){i(this,"container");i(this,"shots",[]);i(this,"cur",0);i(this,"fade",1e4);i(this,"playing",!1);i(this,"scene");i(this,"pause",120);i(this,"curPause",0);i(this,"curShot");i(this,"nextShot");this.duration=s,this.names=[];for(let o=0;o<e;o++)this.names.push(t+o);this.scale=n}addToScene(t){this.scene=t,this.container=t.add.container(0,0),this.names.forEach((e,s)=>{const n=t.add.sprite(0,0,e);n.setAlpha(0),n.setDepth(1e3),n.setTint(8421504),this.container.add(n),this.shots.push(n)}),this.container.setScale(this.scale)}highlight(t){this.shots.forEach(e=>{t?e.setTint(16777215):e.setTint(8421504)})}crossFadeTo(t){t===this.cur||t<0||t>=this.shots.length||(this.curShot=this.shots[this.cur],this.nextShot=this.shots[t],this.scene.tweens.add({targets:this.curShot,alpha:0,duration:this.duration,onComplete:()=>{this.curShot.alpha=0}}),this.scene.tweens.add({targets:this.nextShot,alpha:1,duration:this.duration,onComplete:()=>{this.curPause=0}}),this.cur=t)}play(){this.playing=!0,this.shots[this.cur].setAlpha(1),this.curPause=0}hide(){this.playing=!1,this.scene.tweens.killTweensOf(this.curShot),this.scene.tweens.killTweensOf(this.nextShot);for(let t=0;t<this.shots.length;t++)this.shots[t].setAlpha(0)}update(){this.curPause<this.pause&&(this.curPause++,this.curPause==this.pause&&this.crossFadeTo((this.cur+1)%this.shots.length))}}function u(a){return new Promise(t=>setTimeout(t,a))}class p{constructor(t,e,s,n,o,h){i(this,"key");i(this,"title");i(this,"tech");i(this,"gameLink");i(this,"collaborators");i(this,"scale",1);this.key=t,this.title=e,this.description=s,this.tech=n,this.gameLink=o,this.collaborators=h}}class E{constructor(){i(this,"videos",[]);i(this,"shots",[]);i(this,"cur",0);i(this,"curCloud");const t="Pilot a giant mecha and rescue human survivors from space debris.<br>Play with your friends to kill aliens, blow up obstacles and save people!<br>Help the most people to WIN THE GLORY!",e=`
			Procedurally generated fully destructuble and moving maps.<br>
			Programmed in GML in Gamamaker. <br>Exported to HTML5 to run in the browser.
		`,s=`
			Made with the Midnight Dame development team.<br>
			Team Lead and Sprite Artist Eli Maki.<br>
			Programming Tru Hawkins.<br>
			Design and concept by Tru Hawkins and Eli Maki
		`,n=new p("gloryDogs","GloryDogs",t,e,"https://gamejolt.com/games/glorydogs/638631",s);n.scale=.4,this.videos.push(n),this.shots.push(new m("gd",5));const o=`
			Fly spaceship through procedurally generated levels.<br>
			Collect pieces to customize your spaceship.<br>
			Mine valuable minerals to upgrade your ship.<br>
			Algorithmically infinite level and upgrade scaling!<br>
		`,h=`
			Mobile game developed for Android in Unity3D<br>
			programmed in C#
		`,r=`
			Programming and Design by Tru Hawkins<br>
			Artwork by Emma Fitzpatrick<br>
			Music by Gabe Zapata<br>
		`,l=new p("stroid","Stroid",o,h,"_",r);this.videos.push(l),this.shots.push(new m("stroid",6));const c=`
			Control a group of up to 10 miners<br>
			Guide your little guys through worm infested ground.<br>
			Collect valuable ores for points!<br>
			Place the bomb to blow up the worm nest!<br>
			And guide your team out to safety!
		`,d=`
			Made for GameJolt Week long Game Jam. <br>
			Based on the movie Tremors as per Game Jam theme. <br>
			Built in Unity3D using C#
		`,b=`
			Design by Eli Maki and Tru Hawkins<br>
			Programming by Tru Hawkins<br>
			Artwork by Eli Maki<br>
			Music by Gabe Zapata<br>
		`,g=new p("trembles","Trembles",c,d,"https://gamejolt.com/games/trembles/729503",b);g.scale=.4,this.videos.push(g),this.shots.push(new m("trembles",6));const y=`
		Run around chugging beer and peeing on people!
		You are the life of the party!
		Just don't stop peeing or drinking beer!
		`,w=`
		Design by Acie Schiff and Tru Hawkins
		Programming by Tru Hawkins
		Artwork by Tru Hawkins
		Music by Brandon Mckie and Tru Hawkins
		`,S=new p("peepeeMadness","PeePee Madness",y,"Unity","https://trugames.itch.io/peepee-madness",w);this.videos.push(S),this.shots.push(new m("pp",4));const k=`
		Mobile game where you control 1 of 3 chubby buddies.
		Roll them through 5 maze levels to get them home saafely.
		Collect candy to speed up and get the best time possible!
		Won best Mobile Game Award at CSU Chico.
		`,v=`
		Design by Tru Hawkins and Sarah Vaughn
		Programming by Tru Hawkins
		Artwork by Sarah Vaughn
		`,T=new p("ROHLB","Roll On Home Little Buddy",k,"Unity","_",v);this.videos.push(T),this.shots.push(new m("rohlb",5))}setVidInfoIndex(t,e){this.setVidInfo(this.videos[t],e)}async setVidInfo(t,e){const s=document.getElementById("left-panel");s&&(s.style.backgroundColor="#333");const n=document.getElementById("right-panel");n&&(n.style.backgroundColor="#333");const o=document.getElementById("gameTitle");o&&(o.textContent=t.title,o.className="block",await u(e));const h=document.getElementById("gameDescription");h&&(h.innerHTML="Description:<br>"+t.description,h.className="block",await u(e));const r=document.getElementById("technologies");r&&(r.innerHTML="Technology:<br>"+t.tech,r.className="block",await u(e));const l=document.getElementById("page");l&&(l.className="block",await u(e));const c=document.getElementById("gameLink");c&&(c.textContent="Game Page",c.href=t.gameLink+"?fres",c.target="_blank",await u(e));const d=document.getElementById("collaborators");d&&(d.innerHTML="Team:<br>"+t.collaborators,d.className="block",await u(e))}playVideo(t){this.curCloud!==void 0&&(this.curCloud.video.stop(),this.curCloud.resetVideo()),this.curCloud=t,t.video.setVisible(!0),t.video.play(!1)}getVideo(){const t=this.videos[this.cur];return this.cur=(this.cur+1)%this.videos.length,t}addShotsToScene(t){for(let e=0;e<this.shots.length;e++)this.shots[e].addToScene(t)}placeShot(t,e,s){t>=0&&t<this.shots.length&&(this.shots[t].container.x=e,this.shots[t].container.y=s)}highlightShot(t,e){this.shots[t].highlight(e)}showShots(){for(let t=0;t<this.shots.length;t++)this.shots[t].play()}hideShots(){for(let t=0;t<this.shots.length;t++)this.shots[t].hide()}update(){for(let t=0;t<this.shots.length;t++)this.shots[t].playing&&this.shots[t].update()}}const f=10,A=250,C=30;class L{constructor(t,e){i(this,"menu");i(this,"main");i(this,"leftDown",!1);i(this,"rightDown",!1);i(this,"startX",0);i(this,"startY",0);i(this,"startTime",0);i(this,"moved",!1);this.menu=t,this.main=e,this.menu.input.keyboard.on("keydown-ESC",()=>{this.menu.togglePause()}),this.menu.input.keyboard.on("keydown-W",()=>{this.upPress()}),this.menu.input.keyboard.on("keydown-S",()=>{this.downPress()}),this.menu.input.keyboard.on("keydown-A",()=>{this.leftPress()}),this.menu.input.keyboard.on("keyup-A",()=>{this.leftRelease()}),this.menu.input.keyboard.on("keydown-D",()=>{this.rightPress()}),this.menu.input.keyboard.on("keyup-D",()=>{this.rightRelease()}),this.menu.input.keyboard.on("keydown-SPACE",()=>{this.tap()}),this.menu.input.on("pointerdown",s=>{this.startX=s.x,this.startY=s.y,this.startTime=s.downTime,this.moved=!1}),this.menu.input.on("pointermove",s=>{if(!s.isDown)return;const n=s.x-this.startX,o=s.y-this.startY;Math.sqrt(n*n+o*o)>f&&(this.moved=!0)}),this.menu.input.on("pointerup",s=>{const n=s.x,o=s.y,h=n-this.startX,r=o-this.startY,l=Math.sqrt(h*h+r*r),c=s.upTime-this.startTime;if(l<=f&&c<=A){this.tap();return}if(l>=C){this.swipe(h,r);return}}),console.log("controllr created")}tap(){!this.menu.paused&&this.main.motionOk&&(this.main.lightsOff?this.main.startGame():this.main.upPress())}swipe(t,e){this.menu.paused&&(e>0?this.menu.move(-1):e<0&&this.menu.move(1))}upPress(){this.menu.paused?this.menu.move(-1):this.main.upPress()}downPress(){this.menu.paused&&this.menu.move(1)}leftPress(){this.leftDown||(this.leftDown=!0,this.menu.paused||this.main.leftPress())}leftRelease(){this.leftDown&&(this.leftDown=!1,this.main.player.leftReleased())}rightPress(){this.rightDown||(this.rightDown=!0,this.menu.paused||this.main.rightPress())}rightRelease(){this.rightDown&&(this.rightDown=!1,this.main.player.rightReleased())}}class O extends Phaser.Scene{constructor(){super({key:"Menu"});i(this,"paused",!1);i(this,"background");i(this,"mainCreated",!1)}create(){this.background=this.add.rectangle(0,0,this.scale.width,this.scale.height,0,1).setOrigin(0),this.background.setAlpha(0),this.archive=new E,this.add.existing(this.archive),this.archive.addShotsToScene(this),this.buffer=120,this.spacing=290,this.numShots=5,this.displayShots=3,this.curShot=0,this.preShot=4,this.placeShots(),this.selectShot(!0),this.scale.on("resize",e=>{this.onResize(e)}),this.mainCreated?console.warn("main scene already created"):(this.mainCreated=!0,this.mainKey="MainScene",M(async()=>{const{MainScene:e}=await import("./index-DuMVb8EJ.js").then(s=>s.m);return{MainScene:e}},__vite__mapDeps([0,1,2])).then(({MainScene:e})=>{var s;this.scene.get(this.mainKey)||this.scene.add(this.mainKey,e,!1),this.mainScene=this.scene.get(this.mainKey),this.mainScene.menu=this,console.log("creating main scene"),this.scene.isActive(this.mainKey)?console.warn("MaiN Scene is already active"):this.scene.launch(this.mainKey,{archive:this.archive}),this.setupMotionUnlock(),this.scene.bringToTop(),new L(this,this.mainScene),(s=document.getElementById("menu"))==null||s.addEventListener("click",()=>{this.togglePause()})}))}setupMotionUnlock(){if(this.welcome=document.getElementById("welcome"),console.log("setting up motion unlock"),!(this.sys.game.device.os.mobile||navigator.maxTouchPoints>0)){this.mainScene.motionOk=!0;return}if(this.game.canvas,typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"){const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100vh",e.style.zIndex="9999999",e.style.background="transparent",e.style.pointerEvents="all",document.body.appendChild(e);const s=n=>{n.stopPropagation(),n.preventDefault(),DeviceMotionEvent.requestPermission().then(o=>{o==="granted"?(this.mainScene.motionOk=!0,window.addEventListener("deviceorientation",this.mainScene.handleOrientation),this.mainScene.startGame()):console.warn("Motion permission denied"),e==null||e.removeEventListener("touchstart",s),e==null||e.removeEventListener("mousedown",s),e!=null&&e.parentElement&&document.body.removeChild(e),requestAnimationFrame(()=>{this.input.manager.pointers.forEach(h=>{h.isDown=!1,h.primaryDown=!1,h.downTime=0})})}).catch(o=>{console.log(o)})};e==null||e.addEventListener("mousedown",s,{once:!0}),e==null||e.addEventListener("touchstart",s,{once:!0})}else console.log("android"),this.mainScene.motionOk=!0,window.addEventListener("deviceorientation",this.mainScene.handleOrientation)}async enableMotion(){if(typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"&&(this.welcome.innerHTML="sent request",await DeviceMotionEvent.requestPermission()!=="granted")){this.welcome.innerHTML="not granted",console.warn("Motion Permision denied");return}this.welcome.innerHTML="got tilt permission",window.addEventListener("deviceorientation",this.mainScene.handleOrientation),window.addEventListener("deviceorientationabsolute",this.mainScene.handleOrientation),this.mainScene.motionOk=!0}togglePause(){this.scene.get(this.mainKey)&&(this.paused=!this.paused,this.paused?(this.scene.pause(this.mainKey),this.archive.showShots(),this.background.setAlpha(.5),this.selectShot(!0)):(this.scene.resume(this.mainKey),this.archive.hideShots(),this.background.setAlpha(0)))}onResize(e){this.background.width=e.width,this.background.height=e.height,this.placeShots()}placeShots(){for(let e=0;e<this.numShots;e++){const s=(this.preShot+e)%this.numShots;e<this.displayShots?this.archive.placeShot(s,this.scale.width/2,this.buffer+this.spacing*e):this.archive.placeShot(s,99999,99999)}}update(){this.archive.update()}move(e){this.selectShot(!1),this.curShot=this.incNum(this.curShot,e),this.preShot=this.incNum(this.preShot,e),this.selectShot(!0),this.placeShots()}incNum(e,s){return s>0?e=(e+1)%this.numShots:e+s>=0?e+=s:e=this.numShots-1,e}selectShot(e){this.archive.highlightShot(this.curShot,e),this.paused&&this.archive.setVidInfoIndex(this.curShot,0)}}export{O as Menu};
