const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/menu-C_Bt2FH4.js","assets/phaser-BOgQtUoh.js"])))=>i.map(i=>d[i]);
var T=Object.defineProperty;var C=(f,c,e)=>c in f?T(f,c,{enumerable:!0,configurable:!0,writable:!0,value:e}):f[c]=e;var i=(f,c,e)=>C(f,typeof c!="symbol"?c+"":c,e);import{r as E,g as I}from"./phaser-BOgQtUoh.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();var A=E();const r=I(A),D="modulepreload",R=function(f){return"/GamePortfolio/"+f},P={},O=function(c,e,t){let s=Promise.resolve();if(e&&e.length>0){let o=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),n=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));s=o(e.map(l=>{if(l=R(l),l in P)return;P[l]=!0;const u=l.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${m}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":D,u||(d.as="script"),d.crossOrigin="",d.href=l,n&&d.setAttribute("nonce",n),document.head.appendChild(d),u)return new Promise((b,B)=>{d.addEventListener("load",b),d.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=o,window.dispatchEvent(h),!h.defaultPrevented)throw o}return s.then(o=>{for(const h of o||[])h.status==="rejected"&&a(h.reason);return c().catch(a)})},g=class g extends Phaser.Scene{constructor(){super("preload")}preload(){if(g.started){console.warn("preload preload run twice");return}g.started=!0,console.log("preload loading ding dong"),this.load.setBaseURL("/GamePortfolio/"),this.welcome=document.getElementById("welcome"),this.load.on("progress",t=>{let s="LOADING";for(let a=0;a<t*5;a++)s+=".";this.welcome.textContent=s}),this.load.spritesheet("player","assets/player.png",{frameWidth:32,frameHeight:32});const c="assets/planet.png",e=new URL(c,window.location.href);console.log("Resolved planet url: ",e.href),this.load.image("planet","assets/planet.png"),this.load.image("background","assets/mindBG.png"),this.load.image("cloud","assets/neuronCloud.png"),this.load.video("gloryDogs","assets/trailers/gloryDogsTrailer.mp4"),this.load.video("stroid","assets/trailers/StroidTrailer.mp4"),this.load.video("trembles","assets/trailers/tremblesTrailer.mp4"),this.load.video("peepeeMadness","assets/trailers/PPMadnessTrailer.mp4"),this.load.video("ROHLB","assets/trailers/RollOnHomeLittleBuddy.mp4");for(let t=0;t<5;t++)this.load.image("gd"+t,"assets/gameScreenshots/gloryDogs"+t+".png");for(let t=0;t<6;t++)this.load.image("stroid"+t,"assets/gameScreenshots/stroid"+t+".png");for(let t=0;t<6;t++)this.load.image("trembles"+t,"assets/gameScreenshots/trembles"+t+".png");for(let t=0;t<4;t++)this.load.image("pp"+t,"assets/gameScreenshots/pp"+t+".png");for(let t=0;t<5;t++)this.load.image("rohlb"+t,"assets/gameScreenshots/rohlb"+t+".png");this.load.once("complete",()=>{console.log("loading complete pig pog"),g.menuLaunched=!0,O(async()=>{const{Menu:o}=await import("./menu-C_Bt2FH4.js");return{Menu:o}},__vite__mapDeps([0,1])).then(({Menu:o})=>{this.scene.add("Menu",o,!0)}),this.sys.game.device.os.mobile||navigator.maxTouchPoints>0?this.welcome.innerHTML="WELCOME<br><br>Tap Screen to Enter":this.welcome.innerHTML="WELCOME!<br><br>Press Space to Enter";const t=this.textures.get("planet");if(!t)console.log("no texture for planet");else{const o=t.getSourceImage();o?console.log("Planet size:",o.width,o.height):console.log("no img on planet")}const s=this.textures.get("space");if(!s)console.log("no texture for space");else{const o=s.getSourceImage();o?console.log("space size:",o.width,o.height):console.log("no img on planet")}const a=this.textures.get("background");if(!a)console.log("no texture for BG");else{const o=a.getSourceImage();o?console.log("bg size:",o.width,o.height):console.log("no img on planet")}})}};i(g,"started",!1),i(g,"menuLaunched",!1);let v=g;class k extends r.Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"player");i(this,"boost",600);i(this,"boostPause",80);i(this,"boostPauseCounter",0);i(this,"boostPauseDecel",100);i(this,"accelMax",1500);i(this,"accel",0);i(this,"decel",200);i(this,"gravity",500);i(this,"gravAccel",100);i(this,"pull",0);i(this,"grounded",!1);i(this,"home");i(this,"rotSpd",0);i(this,"rotMax",20);i(this,"phoneRotMax",5);i(this,"rotAccel",4);i(this,"rotDecel",20);i(this,"rotInput",0);i(this,"rotPause",15);i(this,"rotDrift",.01);i(this,"watching",!1);i(this,"upPress",!1);i(this,"leftPress",!1);i(this,"rightPress",!1);e.add.existing(this),e.physics.add.existing(this),this.createAnimations(),this.play("idle"),this.on("animationcomplete",this.handleAnimationComplete,this),this.setCollideWorldBounds(!1);const a=Math.min(this.width,this.height)/2;this.body.setCircle(a),this.setDepth(4),this.face=e.add.sprite(t,s,"player",14),this.face.setDepth(this.depth+1),this.scene.events.on("postupdate",()=>{this.face.setPosition(this.x,this.y),this.face.setRotation(this.rotation)}),this.keys={down:this.scene.input.keyboard.addKey(r.Input.Keyboard.KeyCodes.S),boost:this.scene.input.keyboard.addKey(r.Input.Keyboard.KeyCodes.SPACE)}}update(e,t){var m;const s=Math.min(t,50)/1e3;if(this.watching)return;if(!this.leftPress&&!this.rightPress&&this.rotSpd!=0){let d=Math.sign(this.rotSpd),b=this.rotDecel*s;Math.abs(this.rotSpd)-b>0?this.rotSpd-=d*b:this.rotSpd=0}if(this.rotSpd!=0)this.rotation+=this.rotSpd*s;else if(this.rotInput>0)this.rotInput-=s;else{let d=r.Math.Angle.Between(this.x,this.y,this.home.x,this.home.y);d+=r.Math.DegToRad(-90)}if(this.upPress)this.upPress=!1;else if(this.boostPauseCounter>0)this.boostPauseCounter-=this.boostPauseDecel*s;else{let d=this.decel*s;this.accel-d>0?(this.accel-=d,this.accel<this.accelMax*.4&&((m=this.anims.currentAnim)==null?void 0:m.key)==="boosted"&&this.play("slowing")):this.accel=0}if(r.Math.Distance.Between(this.x,this.y,this.home.x,this.home.y)<this.home.displayWidth/2+5)this.grounded||(this.pull=0,this.grounded=!0);else{this.grounded=!1;let d=this.gravAccel*s;this.pull+d<this.gravity?this.pull+=d:this.pull=this.gravity}const o=new r.Math.Vector2(this.x,this.y),n=new r.Math.Vector2(this.home.x,this.home.y).subtract(o);n.normalize(),n.scale(this.pull);const l=new r.Math.Vector2(Math.cos(this.rotation),Math.sin(this.rotation)),u=new r.Math.Vector2(l.y,-l.x);this.setVelocity(u.x*this.accel+n.x,u.y*this.accel+n.y)}upPressed(){if(this.watching)this.stopWatching();else{const e=this.accel/this.accelMax;this.play("boosting"),this.boostPauseCounter=this.boostPause;const t=r.Math.Linear(this.boost,this.boost/100,e);this.accel+t<this.accelMax?this.accel+=t:this.accel=this.accelMax,this.pull=0,this.upPress=!0}}setRotation(e,t){this.watching?this.stopWatching():t!=0&&(this.rotSpd=r.Math.Linear(this.rotAccel,this.phoneRotMax,e)*t)}leftPressed(){this.watching?this.stopWatching():(this.rotInput=this.rotPause,this.rotSpd-this.rotAccel>-this.rotMax?this.rotSpd-=this.rotAccel:this.rotSpd=-this.rotMax,this.leftPress=!0)}leftReleased(){this.leftPress=!1}rightPressed(){this.watching?this.stopWatching():(this.rotInput=this.rotPause,this.rotSpd+this.rotAccel<this.rotMax?this.rotSpd+=this.rotAccel:this.rotSpd=this.rotMax,this.rightPress=!0)}rightReleased(){this.rightPress=!1}createAnimations(){let e=10;this.scene.anims.create({key:"idle",frames:[{key:"player",frame:0}],frameRate:1,repeat:-1}),this.scene.anims.create({key:"boosting",frames:this.scene.anims.generateFrameNumbers("player",{start:1,end:8}),frameRate:e,repeat:0}),this.scene.anims.create({key:"boosted",frames:[{key:"player",frame:9}],frameRate:1,repeat:-1}),this.scene.anims.create({key:"slowing",frames:this.scene.anims.generateFrameNumbers("player",{start:10,end:12}),frameRate:e,repeat:0})}handleAnimationComplete(e){e.key==="boosting"?this.play("boosted"):e.key==="slowing"&&(this.play("idle"),this.watching&&this.face.setVisible(!1))}watchVideo(){var e;this.setVelocity(0,0),this.accel=0,this.rotSpd=0,this.pull=0,this.watching=!0,((e=this.anims.currentAnim)==null?void 0:e.key)!=="idle"?this.play("slowing"):this.face.setVisible(!1)}stopWatching(){this.watching=!1,this.face.setVisible(!0)}setHome(e){this.home=e}onHomeCollide(e,t){console.log("landed")}}class y extends r.Physics.Arcade.Sprite{constructor(e,t,s,a,o){const h=r.Math.DegToRad(t),n=p/2+Math.cos(h)*s,l=p/2-Math.sin(h)*s;super(e,n,l,"cloud");i(this,"player");i(this,"overlapping",!1);i(this,"scene");i(this,"archive");i(this,"file");this.scene=e,this.archive=o,e.add.existing(this),e.physics.add.existing(this),this.rotation=r.Math.DegToRad(r.Math.Between(0,360));const u=Math.min(this.width,this.height)/2;this.body.setCircle(u),this.body.setOffset(20,20),this.setImmovable(!0),this.player=a}update(){const e=this.scene.physics.overlap(this,this.player);e&&!this.overlapping?this.onPlayerCollide(this.player,this):!e&&this.overlapping,this.overlapping=e,this.rotation+=r.Math.DegToRad(.04)}setVideo(e){this.file=e,this.video=this.scene.add.video(this.x,this.y,e.key),this.video.setMute(!0),this.scene.videos.push(this.video),this.video.setScale(e.scale),this.video.setLoop(!1),this.video.video.loop=!1,this.video.video.addEventListener("ended",this.onVideoComplete.bind(this)),this.video.setDepth(3)}resetVideo(){this.video.setVisible(!1),this.video.video.currentTime=0,this.video.alpha=1}onPlayerCollide(e,t){if(this.file===void 0)this.setVideo(this.archive.getVideo());else if(this.video.video.currentTime!=0){console.log("video time not done "+this.video.video.currentTime);return}e.watchVideo(),this.archive.playVideo(this),this.archive.setVidInfo(this.file,500)}onVideoComplete(){this.scene.tweens.add({targets:this.video,alpha:0,duration:1e3,ease:"Linear",onComplete:()=>{this.resetVideo()}}),this.player.stopWatching()}}class L extends r.GameObjects.Container{constructor(e,t){super(e,0,0);i(this,"up",!1);i(this,"turn",!1);i(this,"watched",!1);i(this,"watchUp",!1);i(this,"bgAlpha",.3);i(this,"mobile",!1);i(this,"teach",!1);this.player=e.player,this.mobile=t;const s=e.cameras.main;this.cam=s,this.bg=e.add.rectangle(s.width/2,s.height/2,400,100,0),this.bg.fillAlpha=0,this.bg.setDepth(999),this.bg.setOrigin(.5),this.bg.setScrollFactor(0),e.scale.on("resize",()=>{this.onResize()}),this.helpText=e.add.text(s.centerX,s.centerY,"",{fontFamily:"Orbitron",fontSize:"24px",color:"#ffffff",align:"center"}),this.helpText.setOrigin(.5),this.helpText.setDepth(1e3),this.helpText.setScrollFactor(0)}boostText(){this.teach&&(this.up||(this.mobile?this.setBox(`Tap Screen
to fly through the cosmos!!!`):this.setBox(`Press W
to fly through the cosmos!!!`)))}watchText(){this.teach&&(this.watched||(this.mobile?this.setBox(`tap screen or tilt device
 to stop watching`):this.setBox("Press W, A, or D to stop watching"),this.watchUp=!0))}testText(e){this.setBox(e)}turnText(){this.teach&&(this.turn||(this.mobile?this.setBox("Tilt device to turn!!!"):this.setBox("Press A and D to turn!!!")))}setBox(e){this.helpText.setText(e),this.bg.fillAlpha=this.bgAlpha}onResize(){this.bg.x=this.cam.width/2,this.bg.y=this.cam.height/2,this.helpText.x=this.cam.centerX,this.helpText.y=this.cam.centerY}endWatch(){this.watchUp&&(this.turn||(this.scene.time.delayedCall(2e3,()=>{this.turnText()}),this.watchUp=!1),this.resetBox())}upPressed(){this.watchUp?this.endWatch():(this.up=!0,this.resetBox(),this.scene.time.delayedCall(2e3,()=>{this.player.watching?this.watchText():this.turnText()}))}turnPressed(){this.watchUp?this.endWatch():(this.turn=!0,this.resetBox())}resetBox(){this.bg.fillAlpha=0,this.helpText.setText("")}}const p=4500,K=!1;let w=!0,M=!1;const V=5;let x=0,S=!1;class W extends r.Scene{constructor(){super({key:"MainScene"});i(this,"player");i(this,"clouds",[]);i(this,"videos",[]);i(this,"archive");i(this,"instructor");i(this,"motionOk",!1);i(this,"handleOrientation",e=>{let t=this.checkLandscape();const s=parseInt(e.gamma??0),a=parseInt(e.beta??0);let o=t?45:60,h=t?a:s,n=Math.abs(h)/o,l=0;h<-5?l=-1:h>V&&(l=1);let u=n*l;x!=u&&(u===0?x<0?this.player.leftReleased():x>0&&this.player.rightReleased():(this.player.setRotation(n,l),this.instructor.testText("rot speed "+this.player.rotSpd)),x=u)})}create(){this.keys={up:this.input.keyboard.addKey(r.Input.Keyboard.KeyCodes.W),left:this.input.keyboard.addKey(r.Input.Keyboard.KeyCodes.A),right:this.input.keyboard.addKey(r.Input.Keyboard.KeyCodes.D),boost:this.input.keyboard.addKey(r.Input.Keyboard.KeyCodes.SPACE)},this.events.on("pause",this.onPause,this),this.events.on("resume",this.onResume,this),this.add.tileSprite(0,0,p+100,p+100,"background").setOrigin(0),this.homeBase=this.physics.add.image(p/2,p/2,"planet");const e=Math.min(this.homeBase.height,this.homeBase.width)/2,t=10;this.homeBase.body.setCircle(e-t),this.homeBase.body.setOffset(t,t),this.homeBase.body.moves=!1,this.homeBase.setImmovable(!0),this.homeBase.setGravity(!1),this.physics.world.setBounds(0,0,p,p),this.player=new k(this,p/2,p/2-this.homeBase.displayWidth/2),this.player.setHome(this.homeBase),this.physics.add.collider(this.player,this.homeBase);const s=this.cameras.main;s.setBounds(0,0,p-40,p-40),s.startFollow(this.player,K,.1,.1),this.instructor=new L(this,this.sys.game.device.os.mobile||navigator.maxTouchPoints>0),this.clouds.push(new y(this,90,500,this.player,this.archive)),this.clouds.push(new y(this,60,1e3,this.player,this.archive)),this.clouds.push(new y(this,180,700,this.player,this.archive)),this.clouds.push(new y(this,0,800,this.player,this.archive)),this.clouds.push(new y(this,270,600,this.player,this.archive))}init(e){this.archive=e.archive}update(e,t){if(w){if(!M&&this.motionOk&&(r.Input.Keyboard.JustDown(this.keys.boost)||this.input.pointer1.isDown)){M=!0,w=!1;const s=document.getElementById("doorLeft"),a=document.getElementById("doorRight"),o=document.getElementById("welcome");let h={progress:0};this.tweens.add({targets:h,progress:100,duration:1500,ease:"Expo.inOut",onUpdate:()=>{const n=h.progress;n>.75&&(S=!0),s.style.transform=`translateX(${-n}%)`,a.style.transform=`translateX(${n}%)`,o.style.opacity=1-n},onComplete:()=>{w=!1,s.style.zIndex="0",a.style.zIndex="0",o.style.zIndex="0",this.instructor.boostText()}})}}else{S&&(this.sys.game.device.os.mobile||navigator.maxTouchPoints>0?this.input.pointer1.isDown&&(this.instructor&&this.instructor.upPressed(),this.player.upPressed()):(r.Input.Keyboard.JustDown(this.keys.up)&&(this.instructor&&this.instructor.upPressed(),this.player.upPressed()),r.Input.Keyboard.JustDown(this.keys.left)&&this.leftPress(),!this.keys.left.isDown&&this.player.leftPress&&this.player.leftReleased(),r.Input.Keyboard.JustDown(this.keys.right)&&this.rightPress(),!this.keys.right.isDown&&this.player.rightPress&&this.player.rightReleased())),this.player.update(e,t),this.archive.update();for(let o=0;o<this.clouds.length;o++)this.clouds[o].update();const s=this.cameras.main;if(r.Math.Distance.Between(this.player.x,this.player.y,this.homeBase.x,this.homeBase.y)>p/2){let o=r.Math.Angle.Between(this.player.x,this.player.y,this.homeBase.x,this.homeBase.y);const h=Math.cos(o)*p,n=Math.sin(o)*p;this.player.x+=h,this.player.y+=n,s.scrollX+=h,s.scrollY+=n}}}hasMotion(){return"DeviceOrientationEvent"in window||"DeviceMotionEvent"in window}doorsOpen(){this.doorRight.setAlpha(0),this.doorLeft.setAlpha(0);const e=document.getElementById("left-panel");e&&(e.className="panel");const t=document.getElementById("right-panel");t&&(t.className="panel");const s=document.getElementById("banner");s&&(s.className="banner"),w=!1}checkLandscape(){return screen.orientation&&screen.orientation.type?screen.orientation.type.startsWith("landscape"):window.matchMedia("(orientation: landscape)").matches?!0:typeof window.orientation<"u"?Math.abs(window.orientation)===90:window.innerWidth>window.innerHeight}leftPress(){this.player.leftPressed(),this.instructor.turnPressed()}rightPress(){this.player.rightPressed(),this.instructor.turnPressed()}onPause(){console.log("main scene is pausing"),this.videos.forEach(e=>e.pause())}onResume(){this.videos.forEach(e=>e.resume())}}document.getElementById("game-wrapper");const z={type:r.AUTO,parent:"game-wrapper",scale:{mode:r.Scale.RESIZE,parent:"game-wrapper",autoCenter:r.Scale.CENTER_BOTH},backgroundColor:"#000000",physics:{default:"arcade",arcade:{debug:!1}},scene:[v],audio:{disableWebAudio:!1}};window.game||(window.game=new r.Game(z));const N=Object.freeze(Object.defineProperty({__proto__:null,MainScene:W,worldSize:p},Symbol.toStringTag,{value:"Module"}));export{O as _,N as m};
