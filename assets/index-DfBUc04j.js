const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/menu-D8ds5yUZ.js","assets/phaser-BOgQtUoh.js"])))=>i.map(i=>d[i]);
var T=Object.defineProperty;var E=(u,l,e)=>l in u?T(u,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[l]=e;var i=(u,l,e)=>E(u,typeof l!="symbol"?l+"":l,e);import{r as C,g as D}from"./phaser-BOgQtUoh.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();var I=C();const a=D(I),A="modulepreload",O=function(u){return"/GamePortfolio/"+u},P={},R=function(l,e,t){let s=Promise.resolve();if(e&&e.length>0){let o=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),h=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));s=o(e.map(c=>{if(c=O(c),c in P)return;P[c]=!0;const f=c.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":A,f||(d.as="script"),d.crossOrigin="",d.href=c,h&&d.setAttribute("nonce",h),document.head.appendChild(d),f)return new Promise((w,B)=>{d.addEventListener("load",w),d.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o}return s.then(o=>{for(const n of o||[])n.status==="rejected"&&r(n.reason);return l().catch(r)})},g=class g extends Phaser.Scene{constructor(){super("preload")}preload(){if(g.started){console.warn("preload preload run twice");return}g.started=!0,console.log("preload loading ding dong"),this.load.setBaseURL("/GamePortfolio/"),this.welcome=document.getElementById("welcome"),this.load.on("progress",t=>{let s="LOADING";for(let r=0;r<t*5;r++)s+=".";this.welcome.textContent=s}),this.load.spritesheet("player","assets/player.png",{frameWidth:32,frameHeight:32});const l="assets/planet.png",e=new URL(l,window.location.href);console.log("Resolved planet url: ",e.href),this.load.image("planet","assets/planet.png"),this.load.image("background","assets/mindBG.png"),this.load.image("cloud","assets/neuronCloud.png"),this.load.video("gloryDogs","assets/trailers/gloryDogsTrailer.mp4"),this.load.video("stroid","assets/trailers/StroidTrailer.mp4"),this.load.video("trembles","assets/trailers/tremblesTrailer.mp4"),this.load.video("peepeeMadness","assets/trailers/PPMadnessTrailer.mp4"),this.load.video("ROHLB","assets/trailers/RollOnHomeLittleBuddy.mp4");for(let t=0;t<5;t++)this.load.image("gd"+t,"assets/gameScreenshots/gloryDogs"+t+".png");for(let t=0;t<6;t++)this.load.image("stroid"+t,"assets/gameScreenshots/stroid"+t+".png");for(let t=0;t<6;t++)this.load.image("trembles"+t,"assets/gameScreenshots/trembles"+t+".png");for(let t=0;t<4;t++)this.load.image("pp"+t,"assets/gameScreenshots/pp"+t+".png");for(let t=0;t<5;t++)this.load.image("rohlb"+t,"assets/gameScreenshots/rohlb"+t+".png");this.load.once("complete",()=>{console.log("loading complete pig pog"),g.menuLaunched=!0,R(async()=>{const{Menu:o}=await import("./menu-D8ds5yUZ.js");return{Menu:o}},__vite__mapDeps([0,1])).then(({Menu:o})=>{this.scene.add("Menu",o,!0)}),this.sys.game.device.os.mobile||navigator.maxTouchPoints>0?this.welcome.innerHTML="WELCOME<br><br>Tap Screen to Enter":this.welcome.innerHTML="WELCOME!<br><br>Press Space to Enter",console.log("checking planet");const t=this.textures.get("planet");if(console.log("caca"),!t)console.log("no texture for planet");else{const o=t.getSourceImage();o?console.log("Planet size:",o.width,o.height):console.log("no img on planet")}const s=this.textures.get("space");if(!s)console.log("no texture for space");else{const o=s.getSourceImage();o?console.log("space size:",o.width,o.height):console.log("no img on planet")}const r=this.textures.get("background");if(!r)console.log("no texture for BG");else{const o=r.getSourceImage();o?console.log("bg size:",o.width,o.height):console.log("no img on planet")}})}};i(g,"started",!1),i(g,"menuLaunched",!1);let x=g;class k extends a.Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"player");i(this,"boost",500);i(this,"boostPause",80);i(this,"boostPauseCounter",0);i(this,"boostPauseDecel",100);i(this,"accelMax",1500);i(this,"accel",0);i(this,"decel",200);i(this,"gravity",500);i(this,"gravAccel",100);i(this,"pull",0);i(this,"grounded",!1);i(this,"home");i(this,"rotSpd",0);i(this,"rotMax",20);i(this,"rotAccel",2);i(this,"rotDecel",1);i(this,"rotInput",0);i(this,"rotPause",15);i(this,"rotDrift",.01);i(this,"watching",!1);i(this,"upPress",!1);i(this,"leftPress",!1);i(this,"rightPress",!1);e.add.existing(this),e.physics.add.existing(this),this.createAnimations(),this.play("idle"),this.on("animationcomplete",this.handleAnimationComplete,this),this.setCollideWorldBounds(!1);const r=Math.min(this.width,this.height)/2;this.body.setCircle(r),this.setDepth(4),this.face=e.add.sprite(t,s,"player",14),this.face.setDepth(this.depth+1),this.scene.events.on("postupdate",()=>{this.face.setPosition(this.x,this.y),this.face.setRotation(this.rotation)}),this.keys={down:this.scene.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.S),boost:this.scene.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.SPACE)}}update(e,t){var m;const s=Math.min(t,50)/1e3;if(this.watching)return;if(!this.leftPress&&!this.rightPress&&this.rotSpd!=0){let d=Math.sign(this.rotSpd),w=this.rotDecel*s;Math.abs(this.rotSpd)-w>0?this.rotSpd-=d*w:this.rotSpd=0}if(this.rotSpd!=0)this.rotation+=this.rotSpd*s;else if(this.rotInput>0)this.rotInput-=s;else{let d=a.Math.Angle.Between(this.x,this.y,this.home.x,this.home.y);d+=a.Math.DegToRad(-90)}if(this.upPress)this.upPress=!1;else if(this.boostPauseCounter>0)this.boostPauseCounter-=this.boostPauseDecel*s;else{let d=this.decel*s;this.accel-d>0?(this.accel-=d,this.accel<this.accelMax*.4&&((m=this.anims.currentAnim)==null?void 0:m.key)==="boosted"&&this.play("slowing")):this.accel=0}if(a.Math.Distance.Between(this.x,this.y,this.home.x,this.home.y)<this.home.displayWidth/2+5)this.grounded||(this.pull=0,this.grounded=!0);else{this.grounded=!1;let d=this.gravAccel*s;this.pull+d<this.gravity?this.pull+=d:this.pull=this.gravity}const o=new a.Math.Vector2(this.x,this.y),h=new a.Math.Vector2(this.home.x,this.home.y).subtract(o);h.normalize(),h.scale(this.pull);const c=new a.Math.Vector2(Math.cos(this.rotation),Math.sin(this.rotation)),f=new a.Math.Vector2(c.y,-c.x);this.setVelocity(f.x*this.accel+h.x,f.y*this.accel+h.y)}upPressed(){if(this.watching)this.stopWatching();else{const e=this.accel/this.accelMax;this.play("boosting"),this.boostPauseCounter=this.boostPause;const t=a.Math.Linear(this.boost,this.boost/100,e);this.accel+t<this.accelMax?this.accel+=t:this.accel=this.accelMax,this.pull=0,this.upPress=!0}}setRotation(e,t){this.watching?this.stopWatching():t!=0&&(this.rotSpd=a.Math.Linear(this.rotAccel,this,rotMax,e)*t)}leftPressed(){this.watching?this.stopWatching():(this.rotInput=this.rotPause,this.rotSpd-this.rotAccel>-this.rotMax?this.rotSpd-=this.rotAccel:this.rotSpd=-this.rotMax,this.leftPress=!0)}leftReleased(){this.leftPress=!1}rightPressed(){this.watching?this.stopWatching():(this.rotInput=this.rotPause,this.rotSpd+this.rotAccel<this.rotMax?this.rotSpd+=this.rotAccel:this.rotSpd=this.rotMax,this.rightPress=!0)}rightReleased(){this.rightPress=!1}createAnimations(){let e=10;this.scene.anims.create({key:"idle",frames:[{key:"player",frame:0}],frameRate:1,repeat:-1}),this.scene.anims.create({key:"boosting",frames:this.scene.anims.generateFrameNumbers("player",{start:1,end:8}),frameRate:e,repeat:0}),this.scene.anims.create({key:"boosted",frames:[{key:"player",frame:9}],frameRate:1,repeat:-1}),this.scene.anims.create({key:"slowing",frames:this.scene.anims.generateFrameNumbers("player",{start:10,end:12}),frameRate:e,repeat:0})}handleAnimationComplete(e){e.key==="boosting"?this.play("boosted"):e.key==="slowing"&&(this.play("idle"),this.watching&&this.face.setVisible(!1))}watchVideo(){var e;this.setVelocity(0,0),this.accel=0,this.rotSpd=0,this.pull=0,this.watching=!0,((e=this.anims.currentAnim)==null?void 0:e.key)!=="idle"?this.play("slowing"):this.face.setVisible(!1)}stopWatching(){this.watching=!1,this.face.setVisible(!0)}setHome(e){this.home=e}onHomeCollide(e,t){console.log("landed")}}class b extends a.Physics.Arcade.Sprite{constructor(e,t,s,r,o){const n=a.Math.DegToRad(t),h=p/2+Math.cos(n)*s,c=p/2-Math.sin(n)*s;super(e,h,c,"cloud");i(this,"player");i(this,"overlapping",!1);i(this,"scene");i(this,"archive");i(this,"file");this.scene=e,this.archive=o,e.add.existing(this),e.physics.add.existing(this),this.rotation=a.Math.DegToRad(a.Math.Between(0,360));const f=Math.min(this.width,this.height)/2;this.body.setCircle(f),this.body.setOffset(20,20),this.setImmovable(!0),this.player=r}update(){const e=this.scene.physics.overlap(this,this.player);e&&!this.overlapping?this.onPlayerCollide(this.player,this):!e&&this.overlapping,this.overlapping=e,this.rotation+=a.Math.DegToRad(.04)}setVideo(e){this.file=e,this.video=this.scene.add.video(this.x,this.y,e.key),this.video.setMute(!0),this.scene.videos.push(this.video),this.video.setScale(e.scale),this.video.setLoop(!1),this.video.video.loop=!1,this.video.video.addEventListener("ended",this.onVideoComplete.bind(this)),this.video.setDepth(3)}resetVideo(){this.video.setVisible(!1),this.video.video.currentTime=0,this.video.alpha=1}onPlayerCollide(e,t){if(this.file===void 0)this.setVideo(this.archive.getVideo());else if(this.video.video.currentTime!=0){console.log("video time not done "+this.video.video.currentTime);return}e.watchVideo(),this.archive.playVideo(this),this.archive.setVidInfo(this.file,500)}onVideoComplete(){this.scene.tweens.add({targets:this.video,alpha:0,duration:1e3,ease:"Linear",onComplete:()=>{this.resetVideo()}}),this.player.stopWatching()}}class L extends a.GameObjects.Container{constructor(e,t){super(e,0,0);i(this,"up",!1);i(this,"turn",!1);i(this,"watched",!1);i(this,"watchUp",!1);i(this,"bgAlpha",.3);i(this,"mobile",!1);i(this,"teach",!1);this.player=e.player,this.mobile=t;const s=e.cameras.main;this.cam=s,this.bg=e.add.rectangle(s.width/2,s.height/2,400,100,0),this.bg.fillAlpha=0,this.bg.setDepth(999),this.bg.setOrigin(.5),this.bg.setScrollFactor(0),e.scale.on("resize",()=>{this.onResize()}),this.helpText=e.add.text(s.centerX,s.centerY,"",{fontFamily:"Orbitron",fontSize:"24px",color:"#ffffff",align:"center"}),this.helpText.setOrigin(.5),this.helpText.setDepth(1e3),this.helpText.setScrollFactor(0)}boostText(){this.teach&&(this.up||(this.mobile?this.setBox(`Tap Screen
to fly through the cosmos!!!`):this.setBox(`Press W
to fly through the cosmos!!!`)))}watchText(){this.teach&&(this.watched||(this.mobile?this.setBox(`tap screen or tilt device
 to stop watching`):this.setBox("Press W, A, or D to stop watching"),this.watchUp=!0))}testText(e){this.setBox(e)}turnText(){this.teach&&(this.turn||(this.mobile?this.setBox("Tilt device to turn!!!"):this.setBox("Press A and D to turn!!!")))}setBox(e){this.helpText.setText(e),this.bg.fillAlpha=this.bgAlpha}onResize(){this.bg.x=this.cam.width/2,this.bg.y=this.cam.height/2,this.helpText.x=this.cam.centerX,this.helpText.y=this.cam.centerY}endWatch(){this.watchUp&&(this.turn||(this.scene.time.delayedCall(2e3,()=>{this.turnText()}),this.watchUp=!1),this.resetBox())}upPressed(){this.watchUp?this.endWatch():(this.up=!0,this.resetBox(),this.scene.time.delayedCall(2e3,()=>{this.player.watching?this.watchText():this.turnText()}))}turnPressed(){this.watchUp?this.endWatch():(this.turn=!0,this.resetBox())}resetBox(){this.bg.fillAlpha=0,this.helpText.setText("")}}const p=4500,K=!1;let v=!0,M=!1;const V=5;let y=0,S=!1;class W extends a.Scene{constructor(){super({key:"MainScene"});i(this,"player");i(this,"clouds",[]);i(this,"videos",[]);i(this,"archive");i(this,"instructor");i(this,"handleOrientation",e=>{let t=this.checkLandscape();const s=parseInt(e.gamma??0),r=parseInt(e.beta??0);let o=t?35:50,n=t?r:s,h=Math.abs(n)/o,c=0;n<-5?c=-1:n>V&&(c=1),this.instructor.testText("new tilt: "+h+" pre tilt: "+y),y!=h&&(h==0||Math.abs(h)!=Math.abs(y)?y<0?this.player.leftReleased():y>0&&this.player.rightReleased():this.player.setRotation(h,c),y=h)})}create(){this.keys={up:this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.W),left:this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.A),right:this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.D),boost:this.input.keyboard.addKey(a.Input.Keyboard.KeyCodes.SPACE)},this.events.on("pause",this.onPause,this),this.events.on("resume",this.onResume,this),this.add.tileSprite(0,0,p+100,p+100,"background").setOrigin(0),this.homeBase=this.physics.add.image(p/2,p/2,"planet");const e=Math.min(this.homeBase.height,this.homeBase.width)/2,t=10;this.homeBase.body.setCircle(e-t),this.homeBase.body.setOffset(t,t),this.homeBase.body.moves=!1,this.homeBase.setImmovable(!0),this.homeBase.setGravity(!1),this.physics.world.setBounds(0,0,p,p),this.player=new k(this,p/2,p/2-this.homeBase.displayWidth/2),this.player.setHome(this.homeBase),this.physics.add.collider(this.player,this.homeBase);const s=this.cameras.main;s.setBounds(0,0,p-40,p-40),s.startFollow(this.player,K,.1,.1),this.instructor=new L(this,this.sys.game.device.os.mobile||navigator.maxTouchPoints>0),this.clouds.push(new b(this,90,500,this.player,this.archive)),this.clouds.push(new b(this,60,1e3,this.player,this.archive)),this.clouds.push(new b(this,180,700,this.player,this.archive)),this.clouds.push(new b(this,0,800,this.player,this.archive)),this.clouds.push(new b(this,270,600,this.player,this.archive))}init(e){this.archive=e.archive}update(e,t){if(v){if(!M&&(a.Input.Keyboard.JustDown(this.keys.boost)||this.input.pointer1.isDown)){this.enableMotion(),M=!0,v=!1;const s=document.getElementById("doorLeft"),r=document.getElementById("doorRight"),o=document.getElementById("welcome");let n={progress:0};this.tweens.add({targets:n,progress:100,duration:1500,ease:"Expo.inOut",onUpdate:()=>{const h=n.progress;h>.75&&(S=!0),s.style.transform=`translateX(${-h}%)`,r.style.transform=`translateX(${h}%)`,o.style.opacity=1-h},onComplete:()=>{v=!1,s.style.zIndex="0",r.style.zIndex="0",o.style.zIndex="0",this.instructor.boostText()}})}}else{S&&(this.sys.game.device.os.mobile||navigator.maxTouchPoints>0?this.input.pointer1.isDown&&(this.instructor&&this.instructor.upPressed(),this.player.upPressed()):(a.Input.Keyboard.JustDown(this.keys.up)&&(this.instructor&&this.instructor.upPressed(),this.player.upPressed()),a.Input.Keyboard.JustDown(this.keys.left)&&this.leftPress(),!this.keys.left.isDown&&this.player.leftPress&&this.player.leftReleased(),a.Input.Keyboard.JustDown(this.keys.right)&&this.rightPress(),!this.keys.right.isDown&&this.player.rightPress&&this.player.rightReleased())),this.player.update(e,t),this.archive.update();for(let o=0;o<this.clouds.length;o++)this.clouds[o].update();const s=this.cameras.main;if(a.Math.Distance.Between(this.player.x,this.player.y,this.homeBase.x,this.homeBase.y)>p/2){let o=a.Math.Angle.Between(this.player.x,this.player.y,this.homeBase.x,this.homeBase.y);const n=Math.cos(o)*p,h=Math.sin(o)*p;this.player.x+=n,this.player.y+=h,s.scrollX+=n,s.scrollY+=h}}}hasMotion(){return"DeviceOrientationEvent"in window||"DeviceMotionEvent"in window}openDoors(){}doorsOpen(){this.doorRight.setAlpha(0),this.doorLeft.setAlpha(0);const e=document.getElementById("left-panel");e&&(e.className="panel");const t=document.getElementById("right-panel");t&&(t.className="panel");const s=document.getElementById("banner");s&&(s.className="banner"),v=!1}async enableMotion(){if(typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"&&await DeviceMotionEvent.requestPermission()!=="granted"){console.warn("Motion Permision denied");return}window.addEventListener("deviceorientation",this.handleOrientation),window.addEventListener("deviceorientationabsolute",this.handleOrientation)}checkLandscape(){return screen.orientation&&screen.orientation.type?screen.orientation.type.startsWith("landscape"):window.matchMedia("(orientation: landscape)").matches?!0:typeof window.orientation<"u"?Math.abs(window.orientation)===90:window.innerWidth>window.innerHeight}leftPress(){this.player.leftPressed(),this.instructor.turnPressed()}rightPress(){this.player.rightPressed(),this.instructor.turnPressed()}onPause(){console.log("main scene is pausing"),this.videos.forEach(e=>e.pause())}onResume(){this.videos.forEach(e=>e.resume())}}document.getElementById("game-wrapper");const z={type:a.AUTO,parent:"game-wrapper",scale:{mode:a.Scale.RESIZE,parent:"game-wrapper",autoCenter:a.Scale.CENTER_BOTH},backgroundColor:"#000000",physics:{default:"arcade",arcade:{debug:!1}},scene:[x],audio:{disableWebAudio:!1}};window.game||(window.game=new a.Game(z));const N=Object.freeze(Object.defineProperty({__proto__:null,MainScene:W,worldSize:p},Symbol.toStringTag,{value:"Module"}));export{R as _,N as m};
